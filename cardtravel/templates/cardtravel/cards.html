{% extends 'base.html' %}
{% load staticfiles %}
{% load pagination_tags %}
{% load cardtravel_extras %}

{% block css %}
	<link rel="stylesheet" type="text/css" href={% static "css/cards.css" %}/>
{% endblock %}

{% block content %}

<!-- for category view-->
<h2>{{ category }}</h2>
<h3>{{ cur_category }}</h3>

<!-- overall for category and cards view -->
<div class="container">
	<div class="row">

		<div class="col-md-10">
			{% autopaginate cards 8 %}
			<table>
				<thead>
					<tr>
						<td>Card foto</td>
						<td>Card name</td>
						<td>Country</td>
						<td>Series</td>
						<td>Year</td>
						<td>Operation</td>
					</tr>
				</thead>
				<tbody>
					{% for card in cards %}
						<tr>
							<td><img src="{{card.face_picture.url}}"></td>
							<td><h5><a href={% url 'view_card' card.id %}>{{ card.name }}</a></h5></td>
							<td><a href={% url 'view_category' 'country' card.country|encode_url %}>{{ card.country }}</a></td>
							<td><a href={% url 'view_category' 'series' card.series|encode_url %}>{{ card.series }}</a></td>
							<td><a href={% url 'view_category' 'year' card.issued_on %}>{{ card.issued_on }}</a></td>
							<td>
								{% if card in user_wishlist %}
									<form action={% url 'remove_card' 'wishlist' card.id %}>
										<button type="submit">
											<span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
										</button>
									</form>
								{% else %}
									<form action={% url 'add_card' 'wishlist' card.id %}>
										<button type="submit">
											<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
										</button>
									</form>
								{% endif %}
								{% if card in user_collection %}
									<form action={% url 'remove_card' 'collection' card.id %}>
										<button type="submit">
											<span class="glyphicon glyphicon-floppy-remove" aria-hidden="true"></span>
										</button>
									</form>
								{% else %}
									<form action={% url 'add_card' 'collection' card.id %}>
										<button type="submit">
											<span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
										</button>
									</form>
								{% endif %}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

		<div class="col-md-2">
			<div class="panel-group" id="accordion">

				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
              				<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                				Countries:
              				</a>
            			</h4>
            		</div>
            		<div id="collapseOne" class="panel-collapse collapse">
					    <ul class="panel-body">
					        {% for country in countries %}
								<li><a href={% url 'view_category' 'country' country|encode_url %}>{{country}}</a></li>
							{% endfor %}
					    </ul>
    				</div>
				</div>

				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
              				<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                				Series:
              				</a>
            			</h4>
            		</div>
            		<div id="collapseTwo" class="panel-collapse collapse">
					    <ul class="panel-body">
					        {% for seria in series %}
								<li><a href={% url 'view_category' 'series' seria|encode_url %}>{{seria}}</a></li>
							{% endfor %}
					    </ul>
    				</div>
				</div>

				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
              				<a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                				Years:
              				</a>
            			</h4>
            		</div>
            		<div id="collapseThree" class="panel-collapse collapse">
					    <ul class="panel-body">
					        {% for year in years %}
								<li><a href={% url 'view_category' 'year' year %}>{{year}}</a></li>
							{% endfor %}
					    </ul>
    				</div>
				</div>

			</div>
		</div>

	</div>
</div>		

{% paginate %}

{% endblock %}
